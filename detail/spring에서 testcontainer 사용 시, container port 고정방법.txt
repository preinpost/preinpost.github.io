1:HL["/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/css/65f0aa09fbcb4723.css",{"as":"style"}]
3:HL["/_next/static/css/c3508cde1db4b948.css",{"as":"style"}]
0:[[["",{"children":["detail",{"children":[["id","spring%EC%97%90%EC%84%9C%20testcontainer%20%EC%82%AC%EC%9A%A9%20%EC%8B%9C%2C%20container%20port%20%EA%B3%A0%EC%A0%95%EB%B0%A9%EB%B2%95","d"],{"children":["__PAGE__?{\"id\":\"spring에서 testcontainer 사용 시, container port 고정방법\"}",{}]}]}]},"$undefined","$undefined",true],"$L4",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/65f0aa09fbcb4723.css","precedence":"next"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/c3508cde1db4b948.css","precedence":"next"}]],["$L5",["$","meta",null,{"name":"next-size-adjust"}]]]]]
6:I{"id":"7708","chunks":["185:static/chunks/app/layout-4b5fffb1dd6661bf.js"],"name":"","async":false}
7:I{"id":"988","chunks":["185:static/chunks/app/layout-4b5fffb1dd6661bf.js"],"name":"","async":false}
8:I{"id":"4356","chunks":["185:static/chunks/app/layout-4b5fffb1dd6661bf.js"],"name":"","async":false}
9:I{"id":"4463","chunks":["272:static/chunks/webpack-090c951ccf088e0d.js","667:static/chunks/2443530c-3f577d13357de5ad.js","488:static/chunks/488-13535ea124b0e0fc.js"],"name":"","async":false}
a:I{"id":"1010","chunks":["272:static/chunks/webpack-090c951ccf088e0d.js","667:static/chunks/2443530c-3f577d13357de5ad.js","488:static/chunks/488-13535ea124b0e0fc.js"],"name":"","async":false}
4:[["$","html",null,{"lang":"en","className":"markdown-body","children":[["$","$L6",null,{}],["$","body",null,{"className":"bg-softWhite","children":["$","div",null,{"className":"container relative mx-auto p-6 __className_d9825c","children":[["$","$L7",null,{}],["$","$L8",null,{}],["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$La",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children","detail","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$La",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L9",null,{"parallelRouterKey":"children","segmentPath":["children","detail","children",["id","spring%EC%97%90%EC%84%9C%20testcontainer%20%EC%82%AC%EC%9A%A9%20%EC%8B%9C%2C%20container%20port%20%EA%B3%A0%EC%A0%95%EB%B0%A9%EB%B2%95","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$La",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lb",null],"segment":"__PAGE__?{\"id\":\"spring에서 testcontainer 사용 시, container port 고정방법\"}"},"styles":[]}],"segment":["id","spring%EC%97%90%EC%84%9C%20testcontainer%20%EC%82%AC%EC%9A%A9%20%EC%8B%9C%2C%20container%20port%20%EA%B3%A0%EC%A0%95%EB%B0%A9%EB%B2%95","d"]},"styles":[]}],"segment":"detail"},"styles":[]}],["$","footer",null,{"className":"mt-24 min-h-14 text-center text-xs","children":["$","div",null,{"className":"flex flex-col justify-center items-center","children":[["$","div",null,{"children":"© 2024. 이민수"}],["$","div",null,{"children":"preinpost@gmail.com"}]]}]}],["$","div",null,{"id":"toast-alert","className":"toast toast-center toast-top z-50 hidden","children":["$","div",null,{"className":"alert alert-info"}]}]]}]}]]}],null]
5:[[["$","meta",null,{"charSet":"utf-8"}],["$","title",null,{"children":"spring에서 testcontainers 사용 시, container port 고정방법"}],["$","meta",null,{"name":"description","content":"blog"}],null,null,null,null,["$","meta",null,{"name":"keywords","content":"spring,spring boot,testcontainers,specific portbinding"}],null,null,null,["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,[null,["$","meta",null,{"property":"og:title","content":"spring에서 testcontainers 사용 시, container port 고정방법"}],null,null,null,null,null,null,[[["$","meta",null,{"property":"og:image","content":"https://preinpost.github.io/article/spring%EC%97%90%EC%84%9C%20testcontainer%20%EC%82%AC%EC%9A%A9%20%EC%8B%9C,%20container%20port%20%EA%B3%A0%EC%A0%95%EB%B0%A9%EB%B2%95/title-image.png"}]]],null,null,null,null,null,null,"$undefined"],null,null,[null,[["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]],[],null]]
c:I{"id":"2195","chunks":["703:static/chunks/app/detail/[id]/page-4ca1614fc749a42f.js"],"name":"","async":false}
d:I{"id":"8707","chunks":["703:static/chunks/app/detail/[id]/page-4ca1614fc749a42f.js"],"name":"","async":false}
e:I{"id":"6002","chunks":["703:static/chunks/app/detail/[id]/page-4ca1614fc749a42f.js"],"name":"","async":false}
b:["$","$Lc",null,{"children":[["$","div",null,{"className":"flex flex-col rounded-lg bg-grayishBlack text-softWhite dark:bg-softWhite dark:text-grayishBlack opacity-90 p-6 shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07),0_10px_20px_-2px_rgba(0,0,0,0.04)]","children":[["$","div",null,{"className":"text-lg","children":"spring에서 testcontainers 사용 시, container port 고정방법"}],["$","div",null,{"className":"flex text-sm self-end","children":["$","div",null,{"children":"2024-03-03"}]}]]}],["$","div",null,{"className":"flex mt-2 justify-end flex-wrap","children":[["$","div",null,{"className":"mx-1.5 text-xs inline-flex items-center font-bold leading-sm uppercase px-3 py-1 my-1 bg-grayishBlack text-softWhite dark:bg-softWhite dark:text-grayishBlack border rounded-full border-softWhite dark:border-grayishBlack flex-wrap","children":"spring"}],["$","div",null,{"className":"mx-1.5 text-xs inline-flex items-center font-bold leading-sm uppercase px-3 py-1 my-1 bg-grayishBlack text-softWhite dark:bg-softWhite dark:text-grayishBlack border rounded-full border-softWhite dark:border-grayishBlack flex-wrap","children":"spring boot"}],["$","div",null,{"className":"mx-1.5 text-xs inline-flex items-center font-bold leading-sm uppercase px-3 py-1 my-1 bg-grayishBlack text-softWhite dark:bg-softWhite dark:text-grayishBlack border rounded-full border-softWhite dark:border-grayishBlack flex-wrap","children":"testcontainers"}],["$","div",null,{"className":"mx-1.5 text-xs inline-flex items-center font-bold leading-sm uppercase px-3 py-1 my-1 bg-grayishBlack text-softWhite dark:bg-softWhite dark:text-grayishBlack border rounded-full border-softWhite dark:border-grayishBlack flex-wrap","children":"specific portbinding"}]]}],["$","div",null,{"className":"flex justify-center my-14 max-h-36 lg:max-h-64","children":["$","$Ld",null,{"src":"/article/spring에서 testcontainer 사용 시, container port 고정방법/title-image.png","alt":"title-image","width":100,"height":100,"className":"w-3/4 object-contain bg-softWhite dark:bg-grayishBlack"}]}],["$","div",null,{"className":"mt-6 p-2","children":["$","div",null,{"className":"flex flex-col bg-softWhite text-grayishBlack dark:bg-grayishBlack dark:text-softWhite","dangerouslySetInnerHTML":{"__html":"<p>최근에 회사 법인카드 사용금액을 관리하기 위해 Spring Boot와 postgresql 기반의 간단한 영수증 프로그램을 만들고 있다.</p>\n<p>local 개발 및 테스트 할 때 주로 H2를 사용해서 테스트를 했는데, H2와 Postgresql 간 쿼리 호환성이 안좋아서 다른방법이 필요했다.</p>\n<p>찾다보니 요즘은 다들 <code>Testcontainers</code> 라는 것을 로컬 개발환경에서 사용하는 것 같아 적용해보았다.</p>\n<p>세팅하고 써보니 만족도가 H2보다 아주아주 좋았지만, 설정을 다 하고 딱 하나가 마음에 안드는 부분이 있었다.</p>\n<p>데이터가 잘 들어갔는지 확인 할 때 DataGrip을 사용해서 확인하는데 컨테이너 바인딩 된 포트가 계속 랜덤하게 바뀌어서 데이터 확인 하려 할 때 마다 포트를 확인해야 한다는 귀찮음이 발생했다.</p>\n<div class=\"highlight highlight-source-java\"><pre><span class=\"pl-c1\">@</span><span class=\"pl-c1\">Profile</span>(<span class=\"pl-s1\">value</span> = {<span class=\"pl-s\">\"test\"</span>, <span class=\"pl-s\">\"local\"</span>, <span class=\"pl-s\">\"dev\"</span>})\n<span class=\"pl-c1\">@</span><span class=\"pl-c1\">Configuration</span>\n<span class=\"pl-k\">public</span> <span class=\"pl-k\">class</span> <span class=\"pl-smi\">PostgresTestContainer</span> {\n\n    <span class=\"pl-c1\">@</span><span class=\"pl-c1\">Bean</span>\n    <span class=\"pl-k\">protected</span> <span class=\"pl-smi\">PostgreSQLContainer</span>&lt;?&gt; <span class=\"pl-en\">postgreSQLContainer</span>() {\n        <span class=\"pl-smi\">PostgreSQLContainer</span>&lt;?&gt; <span class=\"pl-s1\">postgreSQLContainer</span> = <span class=\"pl-k\">new</span> <span class=\"pl-smi\">PostgreSQLContainer</span>&lt;&gt;(<span class=\"pl-s\">\"postgres:16\"</span>);\n        <span class=\"pl-s1\">postgreSQLContainer</span>.<span class=\"pl-en\">withCreateContainerCmdModifier</span>(<span class=\"pl-s1\">cmd</span> -&gt; {\n            <span class=\"pl-s1\">cmd</span>.<span class=\"pl-en\">withName</span>(<span class=\"pl-s\">\"receipt_db\"</span>);\n            <span class=\"pl-s1\">cmd</span>.<span class=\"pl-en\">withHostName</span>(<span class=\"pl-s\">\"receipt_db\"</span>);\n\n            <span class=\"pl-c\">// 특정 port binding</span>\n            <span class=\"pl-smi\">Optional</span>.<span class=\"pl-en\">ofNullable</span>(<span class=\"pl-s1\">cmd</span>.<span class=\"pl-en\">getHostConfig</span>()).<span class=\"pl-en\">ifPresent</span>(<span class=\"pl-s1\">hostConfig</span> -&gt; {\n                <span class=\"pl-s1\">hostConfig</span>.<span class=\"pl-en\">withPortBindings</span>(<span class=\"pl-smi\">PortBinding</span>.<span class=\"pl-en\">parse</span>(<span class=\"pl-s\">\"40111:5432\"</span>));\n            });\n\n            <span class=\"pl-s1\">cmd</span>.<span class=\"pl-en\">withAliases</span>(<span class=\"pl-s\">\"receipt_db\"</span>);\n        });\n        <span class=\"pl-s1\">postgreSQLContainer</span>.<span class=\"pl-en\">withDatabaseName</span>(<span class=\"pl-s\">\"receipt_db\"</span>);\n        <span class=\"pl-s1\">postgreSQLContainer</span>.<span class=\"pl-en\">withUsername</span>(<span class=\"pl-s\">\"test\"</span>);\n        <span class=\"pl-s1\">postgreSQLContainer</span>.<span class=\"pl-en\">withPassword</span>(<span class=\"pl-s\">\"test\"</span>);\n\n        <span class=\"pl-s1\">postgreSQLContainer</span>.<span class=\"pl-en\">start</span>();\n        <span class=\"pl-k\">return</span> <span class=\"pl-s1\">postgreSQLContainer</span>;\n    }\n}</pre></div>\n<p><code>withPortBindings</code> 설정을 해서 위 처럼 Bean을 하나 만들어주면, 포트를 고정시킬 수 있다!</p>\n"}}]}],["$","$Le",null,{}]]}]
